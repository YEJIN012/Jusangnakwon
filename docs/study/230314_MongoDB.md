# NoSQL - MongoDB

- MongoDB의 도큐먼트 형식은 임의의 데이터 구조를 저장하는 스키마로 잘 알려진 JSON에 기반한다. JSON은 JavaScript Object Notation의 약어다. 방금 본 것처럼 JSON 구조는 키와 키값으로 이루어져 있고, 중첩에 제한이 없다. JSON은 프로그래밍 언어에서 사전이나 해시맵과 유사하다.
- MongoDB의 쿼리 언어 기능은 특별히 도큐먼트 구조의 조작을 위해 설계되었다.
- 개발자들은 객체 지향 언어를 사용해서 작업을 하고 객체에 잘 매핑되는 데이터 저장 구조를 원한다. MongoDB에서는 프로그래밍 언어에서 정의한 객체가 그대로 저장되므로 객체 매퍼의 복잡성이 사라진다.

### MongoDB의 핵심 기능

- 도큐먼트 데이터 모델

MongoDB는 도큐먼트 지향적인 데이터베이스다. 도큐먼트는 숫자 값을 제외한 모든 곳에서 따옴표를 필요로 한다.

도큐먼트는 본질적으로 속성의 이름과 값으로 이루어진 쌍의 집합이다. 속성의 값은 문자열이나 숫자, 날짜와 같이 간단한  데이터 타입이 될 수 있다. 하지만 이 값은 또한 배열이나 심지어 다른 JSON 도큐먼트가 될 수도 있다.

- 스키마가 없는 모델의 장점
1. 데이터베이스가 아닌 애플리케이션이 데이터 구조를 정한다. 이것은 데이터의 구조가 빈번히 변경되는 개발 초기 단계에서 개발 속도를 단축시켜 준다.
2. 스키마가 없는 데이터 모델을 통해 가변적인 속성을 갖는 데이터를 표현할 수 있다. 도큐먼트로 데이터를 모델링하면 조인이 필요 없고, 새로운 속성은 한 도큐먼트에 동적으로 추가할 수 있다.

### 애드혹 쿼리

시스템이 애드혹 쿼리를 지원한다 = 시스템이 받아들일 수 있는 질의를 미리 정의할 필요가 없다

### 인덱스

MongoDB는 한 컬렉션에 64개까지 세컨더리 인덱스를 만들 수 있다. 여러 개의 세컨더리 인덱스를 허용함으로써 MongoDB는 사용자가 넓은 범위의 쿼리를 최적화하도록 허용한다.

### 복제 세트

복제 세트라고 부르는 구성을 통해 데이터베이스 복제 기능을 제공한다. 복제 세트는 서버와 네트워크 장애가 발생할 경우를 대비해 중복성과 장애조치 자동화를 위해 데이터를 여러 대의 서버에 분산한다.

복제 세트는 많은 MongoDB서버로 구성되어 있는데, 보통 각각의 서버는 분리된 물리 장비에 별도로 존재하며, 이를 노드라 부른다. 어느 순간이든지 하나의 노드는 복제 세트의 프라이머리 노드로 존재하며, 더불어 하나 또는 그 이상의 세컨더리 노드가 존재한다.

### MongoDB를 사용하는 이유

MongoDB는 키-값 저장 시스템과 관계형 데이터베이스의 장점만을 모아서 설계되었다. 키-값 저장 시스템은 시스템의 단순성으로 인해 속도가 매우 빠르고 확장도 상대적으로 용이하다. 관계 데이터베이스는 수평적인 확장은 어려운 반면에 다양한 데이터 모델과 강력한 쿼리 언어를 가지고 있다.

데이터베이스의 용도라는 관점에서 보면 MongoDB는 웹 애플리케이션, .. 등에서 일차 데이터 저장 시스템으로 적합하다. 또한, 스키마가 존재하지 않는 데이터를 저장하기가 용이하므로 미리 구조가 알려지지 않은 데이터를 저장하는 데 유용하다.